Хронологический план разработки (MVP → релиз)

Подход: «инфраструктура → скелет → мясо → полировка» – сначала всё, что трудно переделать, потом функционал, потом красота.

⸻

Фаза 0 · Организация проекта (1 день)
	1.	Git-репозиторий + ветвление
	•	main → production; dev → интеграция; feature-ветки под задачи.
	2.	CI/CD skeleton
	•	GitHub Actions: сборка Flutter для iOS/Android + линтеры + unit-тесты.
	3.	Договора (спеки)
	•	Таблица всех эндпоинтов с примером JSON.
	•	ER-диаграмма БД.
	•	Figma-макет двух экранов (Dashboard, Profile) только в wireframe.

⸻

Фаза 1 · Back-end фундамент (2-3 дня)
	1.	Выбор сервиса – Supabase (Postgres + Auth) или Firebase + Cloud Functions.
	2.	Схема БД (.sql миграции)
	•	patients, daily_entries, weekly_entries, monthly_entries, tokens.
	3.	Автоматические миграции в dev окружении.
	4.	REST RPC / Edge Functions
	•	POST /login, POST /sendDaily, … – stub-функции, всегда 200.
	•	JWT на основе patient_code.
	5.	Unit-тесты функций (PostgREST/Functions).
	6.	Облачное окружение stage с открытым Swagger.

⸻

Фаза 2 · Flutter scaffold (1-2 дня)
	1.	flutter create lars_app + flavor dev / prod.
	2.	Папки models/, services/, screens/, widgets/.
	3.	Подключён dio или http с interceptors для токена.
	4.	Локальное хранилище (Hive/Isar) + stub-данные.
	5.	Запуск CI на эмуляторе Android.

⸻

Фаза 3 · Аутентификация по коду (1-2 дня)
	1.	Экран «Ввести код» с простой формой.
	2.	Вызов POST /login → хранить token + patient_code в secure storage.
	3.	Навигация на Dashboard.
	4.	Инструментальный тест логина.

⸻

Фаза 4 · Базовые модели и формы (4-5 дней)
	1.	Dart-классы DailySymptomEntry / WeeklyLarsScore / MonthlyQoL.
	2.	Виджет формы Daily с валидацией.
	3.	Сервис‐метод ApiService.sendDaily(entry).
	4.	Повторить для Weekly, Monthly (можно генерировать из JSON-списки вопросов).
	5.	Кэш последней отправки в Hive: lastDaily, lastWeekly, lastMonthly.

⸻

Фаза 5 · Алгоритм выбора опросника (1 день)
	1.	Функция QuizScheduler.pick(DateTime today) согласно правилу «месяц > неделя > день».
	2.	Юнит-тесты на краевые случаи.

⸻

Фаза 6 · Напоминания (1 день)
	1.	Пакет flutter_local_notifications.
	2.	Ежедневный повтор в 19:00 локального времени.
	3.	При отправке формы → обновить badge / отменить напоминание на сегодня.

⸻

Фаза 7 · Мини-аналитика на Dashboard (2 дня)
	1.	Получить последние 7 Daily-записей из Hive или GET /history?period=7.
	2.	Sparkline (fl_chart) количества дефекаций.
	3.	Плашка «Сегодня ещё не заполнено» с красным индикатором.

⸻

Фаза 8 · Безопасность и полировка back-end (2 дня)
	1.	Проверка JWT во всех эндпоинтах.
	2.	Ограничение CORS, rate limit.
	3.	Логирование в Supabase Logs / Cloud Logging.
	4.	Резервное копирование БД (daily snapshot).

⸻

Фаза 9 · QA & beta-тест (3-4 дня)
	1.	Тест-план: 10 сценариев (первый логин, потеря сети, смена времени, …).
	2.	TestFlight + Google Play Internal Testing.
	3.	Сбор фидбэка врачей на веб-таблице Supabase.
	4.	Фикс критических багов.

⸻

Фаза 10 · Release v1.0 (1 день)
	1.	Подпись iOS/Android, манифесты, privacy policy.
	2.	Тег v1.0 в git → CI собирает релиз.
	3.	Каталог App Store / Play Store.

⸻

Параллелизм и зависимые задачи
	•	Фаза 1 ↔ Фаза 2 можно делать параллельно разными людьми.
	•	Формы (Фаза 4) используют мок-API до готовности Фазы 1.
	•	Напоминания (Фаза 6) не зависят от сервера – можно прихватить раньше, если UI-разработчик свободен.
	•	Аналитика (Фаза 7) цепляется после того, как в Hive реально копятся данные.

⸻

После MVP
	•	Веб-кабинет врача с графиками Supabase → React + Charts.
	•	Серверные алгоритмы раннего предупреждения (ML).
	•	Push-уведомления от сервера (FCM) вместо локальных.
	•	Многоязычность и дизайн-пак на iPad/планшет.

Эта последовательность минимизирует блокировки, потому что:
	1.	миграции и API-контракты фиксируются первыми,
	2.	фронт-энд пишет против моков,
	3.	интеграция идёт, когда обе части уже живут в stage.

Двигайтесь сверху вниз по фазам – так проще держать команду синхронизированной и получать работающий билд каждый спринт.